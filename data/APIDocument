# API Documentation - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå

Base URL: `http://localhost/asset-management/asset_management_api`

---

## üîê Authentication

### 1. Login
```
POST /auth/login
```
**Body:**
```json
{
    "username": "admin",
    "password": "admin123"
}
```
**Response:**
```json
{
    "success": true,
    "message": "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",
    "data": {
        "token": "eyJ1c2VyX2lkIjoxLCJ...",
        "user": {
            "user_id": 1,
            "username": "admin",
            "fullname": "‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö",
            "role": "Admin"
        }
    }
}
```

### 2. Register
```
POST /auth/register
```
**Body:**
```json
{
    "username": "newuser",
    "password": "password123",
    "fullname": "‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•",
    "role": "Inspector",
    "email": "user@example.com",
    "phone": "0812345678"
}
```

---

## üì¶ Assets (‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå)

### 1. ‡∏î‡∏π‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
```
GET /assets
```

### 2. ‡∏î‡∏π‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ï‡∏≤‡∏° ID
```
GET /assets/{id}
```

### 3. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå
```
GET /assets?q=keyword
```

### 4. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÉ‡∏´‡∏°‡πà (‡∏ï‡πâ‡∏≠‡∏á Login)
```
POST /assets
Headers: Authorization: Bearer {token}
```
**Body:**
```json
{
    "asset_name": "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå",
    "serial_number": "SN123456",
    "quantity": 1,
    "unit": "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á",
    "price": 25000,
    "received_date": "2025-01-15",
    "department_id": 1,
    "location_id": 1,
    "status": "‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ",
    "barcode": "QR123456"
}
```

### 5. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå (‡∏ï‡πâ‡∏≠‡∏á Login)
```
PUT /assets/{id}
Headers: Authorization: Bearer {token}
```

---

## üè¢ Departments (‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô)

### 1. ‡∏î‡∏π‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
```
GET /departments
```

### 2. ‡∏î‡∏π‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏° ID
```
GET /departments/{id}
```

### 3. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô (‡∏ï‡πâ‡∏≠‡∏á Login)
```
POST /departments
Headers: Authorization: Bearer {token}
```
**Body:**
```json
{
    "department_name": "‡∏†‡∏≤‡∏Ñ‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®",
    "faculty": "‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°"
}
```

### 4. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô (‡∏ï‡πâ‡∏≠‡∏á Login)
```
PUT /departments/{id}
Headers: Authorization: Bearer {token}
```

### 5. ‡∏•‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô (‡∏ï‡πâ‡∏≠‡∏á Login)
```
DELETE /departments/{id}
Headers: Authorization: Bearer {token}
```

---

## üìç Locations (‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà)

### 1. ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
```
GET /locations
```

### 2. ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏≤‡∏° ID
```
GET /locations/{id}
```

### 3. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà (‡∏ï‡πâ‡∏≠‡∏á Login)
```
POST /locations
Headers: Authorization: Bearer {token}
```
**Body:**
```json
{
    "building_name": "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ IT",
    "room_number": "301",
    "description": "‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå"
}
```

### 4. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà (‡∏ï‡πâ‡∏≠‡∏á Login)
```
PUT /locations/{id}
Headers: Authorization: Bearer {token}
```

### 5. ‡∏•‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà (‡∏ï‡πâ‡∏≠‡∏á Login)
```
DELETE /locations/{id}
Headers: Authorization: Bearer {token}
```

---

## ‚úÖ Asset Checks (‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå)

### 1. ‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /checks
Headers: Authorization: Bearer {token}
```

### 2. ‡∏î‡∏π‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏ß‡∏à (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /checks/unchecked
Headers: Authorization: Bearer {token}
```

### 3. ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /checks/asset/{asset_id}
Headers: Authorization: Bearer {token}
```

### 4. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (‡∏ï‡πâ‡∏≠‡∏á Login)
```
POST /checks
Headers: Authorization: Bearer {token}
```
**Body:**
```json
{
    "asset_id": 1,
    "check_date": "2025-01-15",
    "check_status": "‡∏õ‡∏Å‡∏ï‡∏¥",
    "remark": "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥"
}
```

---

## üìã Asset History (‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢)

### 1. ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /history
Headers: Authorization: Bearer {token}
```

### 2. ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /history/asset/{asset_id}
Headers: Authorization: Bearer {token}
```

### 3. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢ (‡∏ï‡πâ‡∏≠‡∏á Login)
```
POST /history
Headers: Authorization: Bearer {token}
```
**Body:**
```json
{
    "asset_id": 1,
    "old_location_id": 1,
    "new_location_id": 2,
    "move_date": "2025-01-15",
    "remark": "‡∏¢‡πâ‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏´‡πâ‡∏≠‡∏á 301 ‡πÑ‡∏õ‡∏´‡πâ‡∏≠‡∏á 302"
}
```

---

## üìö Borrows (‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°-‡∏Ñ‡∏∑‡∏ô)

### 1. ‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /borrows
Headers: Authorization: Bearer {token}
```

### 2. ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏¢‡∏∑‡∏° (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /borrows/active
Headers: Authorization: Bearer {token}
```

### 3. ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /borrows/asset/{asset_id}
Headers: Authorization: Bearer {token}
```

### 4. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏° (‡∏ï‡πâ‡∏≠‡∏á Login)
```
POST /borrows
Headers: Authorization: Bearer {token}
```
**Body:**
```json
{
    "asset_id": 1,
    "borrower_name": "‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ",
    "department_id": 1,
    "borrow_date": "2025-01-15",
    "return_date": null
}
```

### 5. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô (‡∏ï‡πâ‡∏≠‡∏á Login)
```
PUT /borrows/{borrow_id}
Headers: Authorization: Bearer {token}
```
**Body:**
```json
{
    "return_date": "2025-01-20",
    "asset_id": 1
}
```

---

## üìä Audit Trail (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£)

### 1. ‡∏î‡∏π Audit Trail ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /audits
Headers: Authorization: Bearer {token}
```

### 2. ‡∏î‡∏π Audit Trail ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /audits/asset/{asset_id}
Headers: Authorization: Bearer {token}
```

### 3. ‡∏î‡∏π Audit Trail ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /audits/user/{user_id}
Headers: Authorization: Bearer {token}
```

---

## üë• Users (‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)

### 1. ‡∏î‡∏π‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ï‡πâ‡∏≠‡∏á Login)
```
GET /users
Headers: Authorization: Bearer {token}
```

### 2. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡∏ï‡πâ‡∏≠‡∏á Login)
```
PUT /users/{user_id}/status
Headers: Authorization: Bearer {token}
```
**Body:**
```json
{
    "status": "Inactive"
}
```

---

## üìù Response Format

### Success Response
```json
{
    "success": true,
    "message": "‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",
    "data": { ... }
}
```

### Error Response
```json
{
    "success": false,
    "message": "‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"
}
```

---

## üîë Status Codes

- `200` - ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- `400` - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- `401` - ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï (‡∏ï‡πâ‡∏≠‡∏á Login)
- `404` - ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- `500` - ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

---

## üß™ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### JavaScript (Fetch API)
```javascript
// Login
const login = async () => {
    const response = await fetch('http://localhost/asset-management/asset_management_api/auth/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            username: 'admin',
            password: 'admin123'
        })
    });
    const data = await response.json();
    localStorage.setItem('token', data.data.token);
};

// Get Assets with Token
const getAssets = async () => {
    const token = localStorage.getItem('token');
    const response = await fetch('http://localhost/asset-management/asset_management_api/assets', {
        headers: {
            'Authorization': `Bearer ${token}`
        }
    });
    const data = await response.json();
    console.log(data);
};
```

### PHP (cURL)
```php
// Login
$ch = curl_init('http://localhost/asset-management/asset_management_api/auth/login');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode([
    'username' => 'admin',
    'password' => 'admin123'
]));
$response = curl_exec($ch);
$data = json_decode($response, true);
$token = $data['data']['token'];
```

---

## üìå ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

1. **Token Authentication**: ‡∏ó‡∏∏‡∏Å API ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Authorization ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á Token ‡πÉ‡∏ô Header
2. **CORS**: API ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö CORS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Frontend ‡∏ó‡∏∏‡∏Å‡πÇ‡∏î‡πÄ‡∏°‡∏ô
3. **Date Format**: ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö `YYYY-MM-DD` ‡πÄ‡∏ä‡πà‡∏ô `2025-01-15`
4. **Encoding**: ‡πÉ‡∏ä‡πâ UTF-8 ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
5. **Audit Trail**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## üéØ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö API

### ‡πÉ‡∏ä‡πâ Postman
1. Import Collection ‡∏à‡∏≤‡∏Å API Documentation
2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variable: `base_url` = `http://localhost/asset-management/asset_management_api`
3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Login ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö Token
4. ‡πÉ‡∏ä‡πâ Token ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏≠‡∏∑‡πà‡∏ô‡πÜ

### ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå test.html
‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `test.html` ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô Browser ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö API ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î